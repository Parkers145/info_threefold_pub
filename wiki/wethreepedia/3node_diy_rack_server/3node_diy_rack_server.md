# DIY 3node Guide - Rack Server - Dell R620 / R720

In the following DIY guide, you will learn how to turn a Dell server (R620, R720) into a 3node farming on the Threefold Grid 3.0.

![3node_diy_rack_server_1](./img/3node_diy_rack_server_1.png) 

Dell R620 1U server

![3node_diy_rack_server_2](./img/3node_diy_rack_server_2.png) 

Some will recommend to wear anti-static gloves as shown here. If you don’t have anti-static gloves, you can simply never forget to touch the metal side of the server before manipulating the hardware. Your hands will discharge the static on the outside of the box, which is secure.

![3node_diy_rack_server_3](./img/3node_diy_rack_server_3.png)  

Here is one of the two 2TB SSD NVME m.2 that we will install on the server. Above the SSD is the PCIe Gen 3, x4 that we will use to connect the SSD to the server.

![3node_diy_rack_server_4](./img/3node_diy_rack_server_4.png)  

You can see at the left of the adaptor that there is a metal piece that can be used to hold more firmly the PCIe adaptor and the SSD. We will remove it for this DIY build. Why? Because it is not necessary as the adaptor can hold the weight of the SSD. Also, this metal piece is full while the brackets in the server have holes in it. This will ensure a better airflow and thus less heat.

![3node_diy_rack_server_5](./img/3node_diy_rack_server_5.png)  

We remove the screws with a star screwdriver.

![3node_diy_rack_server_6](./img/3node_diy_rack_server_6.png) 

![3node_diy_rack_server_7](./img/3node_diy_rack_server_7.png)  

This SSD already has a heatsink. There is no need to use the heatsink included in the PCIe adaptor kit. If you remove the heatsink or the sticker under the SSD, you will lose your 5 years warranty.

![3node_diy_rack_server_8](./img/3node_diy_rack_server_8.png)  

When you put the SSD in the adaptor, make sure you have the opening in line with the adaptor.

![3node_diy_rack_server_9](./img/3node_diy_rack_server_9.png)  

![3node_diy_rack_server_10](./img/3node_diy_rack_server_10.png)  

Fitting in the SSD takes some force. Do not overdo it and take your time!

![3node_diy_rack_server_11](./img/3node_diy_rack_server_11.png)  

It’s normal that the unscrewed part is lifting in the air before you screw the SSD on the adaptor.

![3node_diy_rack_server_12](./img/3node_diy_rack_server_12.png)  

To screw the SSD in place, use the screwdriver included in the PCIe adaptor kit.

![3node_diy_rack_server_13](./img/3node_diy_rack_server_13.png)  

![3node_diy_rack_server_14](./img/3node_diy_rack_server_14.png)  

Now that’s a steady SSD!

![3node_diy_rack_server_15](./img/3node_diy_rack_server_15.png)  

It’s now time to get under the hood! Make sure the case is at the unlocked position. If you need to turn it to unlocked position, use a flathead screwdriver or a similar tool.

![3node_diy_rack_server_16](./img/3node_diy_rack_server_16.png)  

![3node_diy_rack_server_17](./img/3node_diy_rack_server_17.png)  

Lift up the lock and the top server plate should glide to the back. You can remove the top of the server.

![3node_diy_rack_server_18](./img/3node_diy_rack_server_18.png)  

Here’s the full story! R620 and all!

![3node_diy_rack_server_19](./img/3node_diy_rack_server_19.png)  

![3node_diy_rack_server_20](./img/3node_diy_rack_server_20.png)  

![3node_diy_rack_server_21](./img/3node_diy_rack_server_21.png)  

To remove this plastic piece, simply lift with your fingers at the designated spot (follow the blue line!).

![3node_diy_rack_server_22](./img/3node_diy_rack_server_22.png)  

Here’s the RAMs! This R620 came already equipped with 256GB of rams dispersed in 16x16GB sticks. If you need to add the RAM sticks yourself, make sure you are doing it correctly. The FAQ covers some basic information for RAM installation.

![3node_diy_rack_server_23](./img/3node_diy_rack_server_23.png)  

To remove a stick, push on the clips on both sides. You can do it one at a time if you want. Make sure it doesn’t pop out and fall on a hardware piece! Once the clips are opened, pull out the RAM stick by holding it on the sides. This will ensure it does not get damaged.

![3node_diy_rack_server_24](./img/3node_diy_rack_server_24.png)  

Here’s the RAM in it’s purest form!

![3node_diy_rack_server_25](./img/3node_diy_rack_server_25.png)  

Here you can see that the gap is not in the middle of the RAM stick. You must be careful when inserting the RAM. Make sure you have the gap aligned with the RAM holder.

![3node_diy_rack_server_26](./img/3node_diy_rack_server_26.png)  

When you want to put a RAM stick in its slot, make sure the plastic holders on the sides are opened and insert the RAM stick. Make sure you align the RAM stick properly. You can then push on one side at a time until the RAM stick clicks in. You can do it both sides at once if you are at ease.

![3node_diy_rack_server_27](./img/3node_diy_rack_server_27.png)  

To put back the plastic protector, simply align the plastic piece with the two nudges in the metal case.

![3node_diy_rack_server_28](./img/3node_diy_rack_server_28.png)  

![3node_diy_rack_server_29](./img/3node_diy_rack_server_29.png)  

We will now remove this PCIe riser in order to connect the SSDs.

![3node_diy_rack_server_30](./img/3node_diy_rack_server_30.png)  

Optional step: put the SSDs and the PCIe riser next to each other so they can talk and break the ice. They will get to learn one another before going into the server to farm TFT.

![3node_diy_rack_server_31](./img/3node_diy_rack_server_31.png)  

Just like with RAM sticks, you want to make sure you are aligned with the slot.

![3node_diy_rack_server_32](./img/3node_diy_rack_server_32.png)  

Next, push the adaptor inside the riser’s opening. This takes some force too. If you are well aligned, it should be done with ease.

![3node_diy_rack_server_33](./img/3node_diy_rack_server_33.png)  

This is what the riser looks like with the two SSDs installed. Now you simply need to put the riser back inside the server.

![3node_diy_rack_server_34](./img/3node_diy_rack_server_34.png)  

Push down on the riser to insert it properly.

![3node_diy_rack_server_35](./img/3node_diy_rack_server_35.png)  

It’s good to notice that the inside of the top plate of the server has great pictures showing how to manipulate the hardware.

![3node_diy_rack_server_36](./img/3node_diy_rack_server_36.png)  

Now you will want to plug in the power cable in the PSU. Here we show two 495W PSUs. With 256GB of RAM and two SSDs NVME, it is better to use two 750W PSUs. Note that this server will only use around 100W at idle. There are two power cables for redundancy. The unit does not need more than one to function.

On a 15A/120V breaker, you can have more than one server. But note that, at full load, this server can use up to 400W. In this case, no more than 3 servers could be plugged on the same breaker. Make sure you adapt to your current situation (server's power consumption, electric breaker, etc.).

![3node_diy_rack_server_37](./img/3node_diy_rack_server_37.png)  

Plugging in the power cable is pretty straightforward. Just make sure you have the 3 pins oriented properly!

![3node_diy_rack_server_38](./img/3node_diy_rack_server_38.png)  

It is highly recommended to plug the power cable in a surge protector. If you have unsteady electricity at your location, it might be good to use a UPS, uninterrupted power supply. A surge protector is essential to avoid overpowering and damaging the server.

![3node_diy_rack_server_39](./img/3node_diy_rack_server_39.png)  

![3node_diy_rack_server_40](./img/3node_diy_rack_server_40.png)  

![3node_diy_rack_server_41](./img/3node_diy_rack_server_41.png)  

Before starting the server, you can plug in the monitor and the keyboard as well as the ethernet cable. Make sure you plug the ethernet cable in one of the four NIC ports.

![3node_diy_rack_server_42](./img/3node_diy_rack_server_42.png)  

Now, power it on!

![3node_diy_rack_server_43](./img/3node_diy_rack_server_43.png)  

The server is booting.

EXTRA:

![3node_diy_rack_server_44](./img/3node_diy_rack_server_44.png)  

![3node_diy_rack_server_45](./img/3node_diy_rack_server_45.png)  

If you want to change the DVD optical drive, push where indicated and remove the power and SATA cables. It is possible to install a SSD disk in there.

The hardware part is done. Now you will want to set the BIOS properly as well as get the bootstrap image of Zero-OS.
***
**Zero-OS Bootstrap Image**

With R620 and R720 Dell servers, UEFI does not work well. You will want to use either a DVD or a USB in BIOS mode.

Go on https://bootstrap.grid.tf/ and download the appropriate image.

Write your farmer ID and make sure you select production mode. This is grid 3.0. Things are getting serious. 

***

Note 1 : If you haven't created a Threefold farm yet, read the section [1. Create a Farm](/farming/farming.md#1-create-a-farm) of the exhaustive Threefold Farming Documentation.

***

Note 2 : You might need to wipe your disks if they are not brand new. To wipe your disks, read the section [4. Wipe All the Disks](/farming/farming.md#4-wipe-all-the-disks) of the exhaustive Threefold Farming Documentation.

***

![3node_diy_rack_server_46](./img/3node_diy_rack_server_46.png)  

![3node_diy_rack_server_47](./img/3node_diy_rack_server_47.png)  

Use the ISO image for DVD boot and the USB image for USB BIOS boot (not UEFI). We use the farm ID 1 here as an example. Put your own farm ID.

For the ISO image, download the file and burn it on a DVD.

For the USB image, with Linux, you will want to do:


> dd status=progress if=FILELOCATION.ISO(or .IMG) of=/dev/sd*. 

Here the * is to indicate that you must adjust according to your disk. To see your disks, write lsblk in the command window. Make sure you select the proper disk!

For Windows, MAC and Linux, you can use Balena-Etcher, a free and open-source software that will let you create a bootstrap image on a USB key. For Windows, you can also use Rufus.
***
**BIOS Time**

Before starting the server, plug in the USB bootstrap image. You can also insert the DVD once the server is on.

When you start the server, press F2 to get into System Setup.

Then, select System BIOS. In System BIOS settings, select Processor Settings.
***
Processor Settings
***
Make sure you have enabled the Logical Processor (Hyper Threading with HP). This turns 8 cores into 16 virtual cores. You can set QPI Speed at Maximum data rate. Make sure you set All to Number of Cores per Processor. You can adjust the Processor Core speed and Processor Bus Speed for specific uses.

It is also good to take a look at the Processors and make sure the hardware is correct.
***
Boot Settings
***
Go to System BIOS Settings and select Boot Settings. In Boot Settings, choose BIOS and not UEFI as the Boot Mode. You need to save your preferences and comeback to select BIOS Boot Settings.

Once back in BIOS Boot Settings, go to Boot Sequence. Depending on your bootstrap image of Zero-OS, select either the USB key or the Optical Drive CD-DVD option. The name of the USB key can be Drive C or else depending on where you plugged it and your server model.

You can also disable the booting options that are not need. It can be good to have a DVD and a USB key with the bootstrap images for redundancy. If one boot fails, the computer would try with the other options of the boot sequence. This can be done with 2 USB keys too.

Boot Sequence Retry enabled will simply redo the booting sequence if the last time did not work.

***
That's it. You've set the BIOS settings properly and now is time to boot the 3node and connect to the Threefold Grid.

You can then save your preferences and exit. Your server should restart and load the bootstrap image. 
***
Booting the 3node
***
Once you've set the BIOS settings and restarted your computer, it will download the Zero-OS bootstrap image. This takes a couple of minutes.

The first time you boot a 3node, it will be written: “This node is not registered (farmer ***: NameOfFarm). This is normal. The Grid will create a node ID and you will be able to see it on screen. This can take a couple of minutes.

Once you have your node ID, you can also go on the Threefold Explorer to see your 3node and verify that the connection is recognized by the Explorer.

***
Note that the main difference between the R620 and the R720 is that the former is a 1U and the latter a 2U. 2U servers are usually less noisy and generate less heat than 1U servers since they have a greater volume. In the R720, fans are bigger and thus less noisy. This can be an important factor to consider. Both offer great performances and work well with Zero-OS.

***

Also note that different CPUs + RAMs configurations are possible.

For example, you could replace the E5-2640 v2 CPUs for the E5-2695 V2. This would give you 48 Threads. You could then go with 12x32GB DDR3 LRDIMM. You would also need 5TB SSD total instead to get the proper ratio, which is 50GB of SSD per CU. Here we have 96 CU. You can always play with the [Threefold Simulator](https://simulator.grid.tf/) to double check.

Note that you cannot have more than 16 sticks of ECC DIMM on the R620/R720. For more sticks, you need LRDIMM as above stated above. 

***

That's it. You have now built a DIY 3node and you are farming on the Threefold Grid.

Welcome to the New Internet.
